// @bun
import{A as t$,B as H,C as v,D as d$,E as i,F as j,G as a$,H as e$,I as nq,J as $q,K as R,L as h,M as qq,N as G,O as Qq,P,Q as Xq,R as L,S as fq,T as Bq,U as Eq,V as Vq,W as Oq,X as Yq,Y as Zq,Z as s,a as A,b as _$,c as g$,d as K,e as u$,f as y$,g as S$,h as A$,i as P$,j as o,k as N,l as J,m as w$,n as o$,o as j$,p as h$,q as r$,r as p$,s as l,t as c$,u as z,v as l$,w as v$,x as m$,y as k$,z as s$}from"./index-j8d2wq60.js";var Ln=Array.from;var bn=(n)=>J(n)?n:[n],zn=(n)=>Number(n),Rn=(n)=>Boolean(n);function xn(n){let $;return class extends n{constructor(...Q){if($)return $;super(...Q);P(this),$=this}}}function Kn(n){return class extends n{constructor(...$){super(...$);let Q=new Map;return new Proxy(this,{get(q,X){let f=`__${X}`;if(!Q.has(f)){let B=q[X];if(A(B))B=function(...E){let V=`${f}_${JSON.stringify(E)}`;if(!Q.has(V)){let O=q[X].apply(q,E);Q.set(V,O)}return Q.get(V)};Q.set(f,B)}return Q.get(f)},set(q,X,f){let B=`__${X}`;return Q.set(B,f),!0}})}}}var Nn=(n,$,Q)=>{let q=Q.value;return{configurable:!0,get(){if(this===n.constructor.prototype)return q;let X=q.bind(this);return Object.defineProperty(this,$,{value:X,configurable:!0,writable:!0}),X}}};function Fn(n,$,Q){let q=Q.value,X=new Map;return Q.value=function(...f){let B=JSON.stringify(f);if(X.has(B))return X.get(B);let E=q.apply(this,f);return X.set(B,E),E},Q}function Hn(n){return function($,Q,q){let X=q.value;return q.value=function(...f){return console.warn(`\u26A0\uFE0F [${Q}] is deprecated: ${n}`),X.apply(this,f)},q}}var b=(n,$)=>{return{name:n,content:$}},$n=(n,$)=>{return{property:n,content:$}},qn=(n,$)=>{return{"http-equiv":n,content:$}};class D{metas=[];constructor(n){n&&this.metas.push(b("description",n))}author(n){return this.meta=b("author",n),this}charset(n){return this.meta={charset:n},this}keywords(...n){return this.meta=b("keywords",n.join(", ")),this}viewport(n){let $=G(n).map(([Q,q])=>[i(Q),String(q)].join("="));return this.meta=b("viewport",$.join(", ")),this}httpEquiv(n){return G(n).forEach(([$,Q])=>{this.meta=qn(i($),String(Q))}),this}robots(...n){return this.meta=b("robots",n.join(", ")),this}themeColor(n){return this.meta=b("theme-color",n),this}openGraph(n){return G(n).forEach(([$,Q])=>{this.meta=$n("og:"+$,String(Q))}),this}twitter(n){return G(n).forEach(([$,Q])=>{this.meta=b("twitter:"+$,String(Q))}),this}push(n){this.metas.unshift(...n)}set meta(n){this.metas.push(n)}}class Qn{}var Xn=["charset","name","property","http-equiv"],w=(n,$,Q=!1,q={})=>{$.forEach((X)=>{for(let f of Xn)if(f in X){let B=X[f];if(Q)L(X,{x:!0});else if(!("x"in X))L(X,q);n[`${f}_${f==="charset"?"":B}`]=X}})},fn=(n,$,Q=!1,q={})=>{$.forEach((X)=>{if("href"in X){let f=X.href;if(Q)L(X,{x:!0});else if(!("x"in X))L(X,q);n[`${f}`]=X}})};class r{_head;idm;mark;push;constructor({initial:n,mark:$,push:Q}={}){this._head=new R(n),this.mark=$||!1,this.push=Q||{}}set head(n){G(n).forEach(([$,Q])=>{if($==="title"||$==="base"){if(Q!==void 0){if($=="base"){if(this.mark)L(Q[0]||{},{x:!0})}this._head.set($,Q)}return}if(Q instanceof D)return w(this._head.init("meta",{}),Q.metas,this.mark,this.push);if(!J(Q))return;switch($){case"meta":return w(this._head.init("meta",{}),Q,this.mark,this.push);case"link":return fn(this._head.init("link",{}),Q,this.mark,this.push);case"script":if(Q.length){this._head.init($,[]);let q=Q.map((X)=>{if(!X.yid&&this.idm)X.yid="sc"+this.idm.mid;if(this.mark)L(X,{x:!0});else if(!("x"in X))L(X,this.push);return X});this._head.get($).push(...q)}return}})}get head(){return this._head}set id(n){this.idm=new p(n)}}var _=(n)=>{return G(n??{}).reduce(($,[Q,q])=>{return $.push(o(q)&&q?Q:`${Q}="${q}"`),$},[""]).join(" ")},jn=(n)=>{let $=new Set;if(!n)return"";let Q=[...n].reduce((q,[X,f])=>{if(X==="meta"||X==="link")f=h(f);if(N(f)){if(X==="title")$.add(`<${X}>${f}</${X}>`);else q.add(`<${X}>${f}</${X}>`);return q}if(!J(f))return q;if(X==="base"){let E=f.slice(-1);if(E)return $.add(`<${X}${_(E[0])}>`),q}return f.map((E)=>{if(X==="script"){let V={...E},O="";if("importmap"in V)V.type="importmap",O=JSON.stringify(V.importmap),delete V.importmap;else if("body"in V)O=V.body,delete V.body;return`<${X}${_(V)}>${O}</${X}>`}return`<${X}${_(E)}>`}).forEach((E)=>{if(E.includes('type="module"'))$.add(E);else if(E.includes("<meta"))$.add(E);else q.add(E)}),q},new Set);return[...$,...Q].join("")};class Bn{lang="en";htmlHead;head;constructor({mark:n,push:$}={}){this.htmlHead=new R,this.head=(Q={})=>{let q=new r({initial:this.htmlHead,mark:n,push:$}),{link:X,script:f,meta:B,title:E,description:V,css:O,js:Y}=Q;if(V)q.head={meta:[{name:"description",content:V}]};if(En(q,{css:O,js:Y}),"base"in Q)q.head={base:Q.base};q.head={script:f,title:E,meta:B,link:X},this.htmlHead=q.head}}}var En=(n,$)=>{let{css:Q,js:q}=$;if(Q){let f=(J(Q)?Q:[Q]).map((B)=>({rel:"preload stylesheet",href:B,as:"style"}));n.head={link:[...f]}}if(q){let f=(J(q)?q:[q]).map((B)=>({src:B}));n.head={script:[...f]}}},hn=(n,$="",{maxAge:Q,expires:q,path:X,domain:f,secure:B,httpOnly:E,sameSite:V})=>{if(Q instanceof Date)Q=Q.getSeconds();if(q instanceof Date)q=q.toUTCString();else if(q===0)q=new Date().toUTCString();return[["Domain",f],["Expires",q],["Max-Age",Q],["Secure",B],["HttpOnly",E],["Path",X],["SameSite",V]].reduce((Y,[W,Z])=>{if(Z!==void 0)Y.push(`${W}=${Z}`);return Y},[`${n}=${$}`]).join("; ")},rn=async(n)=>{if(z)return;return new Promise(($,Q)=>{let q=document.createElement("link");if(n.rel!=="stylesheet")n.rel="stylesheet",n.as="style";G(n).forEach(([X,f])=>{q.setAttribute(X,f)}),q.onload=()=>$(q),q.onerror=()=>Q(Error("Failed to load CSS")),document.head.appendChild(q)})},pn=async(n)=>{if(z)return;return new Promise(($,Q)=>{let q=document.createElement("meta");G(n).forEach(([X,f])=>{q.setAttribute(X,f)}),q.onload=()=>$(q),q.onerror=()=>Q(Error("Failed to load CSS")),document.head.appendChild(q)})},cn=(n)=>{if(z)return;return new Promise(($,Q)=>{let q=document.createElement("script"),X="";if("importmap"in n)n.type="importmap",X=JSON.stringify(n.importmap),delete n.importmap;else if("body"in n)X=n.body,delete n.body;if(X)q.textContent=X;G(n).forEach(([f,B])=>{q.setAttribute(f,B)}),q.onload=()=>$(q),q.onerror=()=>Q(Error("Failed to load Script")),document.head.appendChild(q),requestAnimationFrame(()=>$("Script executed"))})},Vn=()=>{let $=document.querySelector("#d-css")?.sheet;if($)return $;let Q=document.createElement("style");return Q.id="d-css",document.head.appendChild(Q),Q.sheet},On=(n,$)=>{for(let Q=0;Q<n.cssRules.length;Q++)if(n.cssRules[Q].selectorText===$)return!0;return!1},Yn=(n)=>Object.entries(n).map(([$,Q])=>`${i($)}: ${Q};`).join(" ");function ln(n,$={}){if(z)return;let Q=Vn();if(!Q)return;if(!On(Q,n))Q.insertRule(`${n} { ${Yn($)} }`,Q.cssRules.length)}var vn=(n,$)=>{let Q=$;if(n?.class)Q.push(...J(n.class)?n.class:[n.class]);return n.class=$,Q.filter((q)=>q)};class p{_c=0;_id="";constructor(n){if(this._c=0,this._id=n??j(5),n?.includes("-")){let[$,Q="0"]=[n.split("-").slice(0,-1).join("-"),n.split("-").slice(-1)[0]];this._id=$,this._c=K(Q)?parseInt(Q):0}}get id(){return this._id+"-"+this._c}get mid(){return this._id+"-"+ ++this._c}}var sn=(n)=>{if(z)return;return n()};var C=(n)=>{return J(n)?n:[n]};function g(n=3){let q=((Error().stack?.split(`
`)??[])[n]||"").match(/at\s+([^(]+)\s*\(/);return(q?q[1].split(".").pop()?.trim():"?")??"?"}class c{name;constructor(n){this.name=n}log=(...n)=>{let $=g(3);console.log(`[${this.name}.${$}]`,...n)};set i(n){let $=g(3);console.log(`[${this.name}.${$}]`,...C(n))}}class Zn{static logger=(n)=>{return new c(N(n)?n:n.constructor.name)};static set f(n){let $=g();console.log(`[${$}]`,...C(n))}static set i(n){console.info(...C(n))}static set e(n){console.error(...C(n))}static set w(n){console.warn(...C(n))}static set d(n){let $=new Date().toLocaleTimeString();console.log(...C(n),`@ ${$}`)}static get d(){let n=new Date().toLocaleTimeString();console.log(`@ ${n}`);return}}var u=(n,$=!1)=>{if(K(n))return[+n,l(n)?"int":"float"];if($&&/\.\w+$/.test(n))return[n,"file"];if(n==="/")return[n,"-"];if(n.length===36&&n.match(/\-/g)?.length===4)return[n,"uuid"];return[n,"string"]},T=(n)=>{let $=n.startsWith("/")?n:"/"+n,Q=$.match(/(?<=\/)[^/].*?(?=\/|$)/g)??["/"],[q,X]=Q.reduce(([f,B],E)=>{if(E.includes("<")){let V=E.match(/(?<=<)[^/].*?(?=>|$)/g);if(V?.length){let[O,Y]=V[0].split(":");if(O)f.push(O),B.push(Y||"_")}}else f.push(E===">"?"/":E);return[f,B]},[[],[]]);if($.endsWith("/")&&$.length>1)q.push("/");return{parsed:q,args:X}};class F{storage;constructor(){this.storage=new R}cache(n,$){if(this.storage.lacks(n))this.storage.set(n,$());return this.storage.get(n)}}var m=["int","float","file","uuid","string"],Gn=(n,$)=>{let Q={},q=[],{parsed:X}=T(n),{parsed:f,args:B}=T($);if(X.length===f.length)f.map((E,V)=>{let O=u(X[V],X.length-1===V);if(E===O[0])return O[0];if(m.includes(O[1]))return q.push(O[0]),O[1];return E}),B.forEach((E,V)=>{Q[E]=q[V]});return Q};class y{_storage;CC;constructor(){this._storage=new R,this.CC=new F}set(n){let{parsed:$,path:Q}=n,q=H($);if(!this._storage.get(q))this._storage.set(q,n);else throw`path: ${Q} already used.`}get(n){let{parsed:$}=this.CC.cache(n,()=>T(n)),Q={},q=this._storage.get(H($));if(!q&&n!=="/")for(let X of this._storage.keys()){let f=[],B=v(X);if($.length===B.length){let E=B.map((Y,W)=>{let Z=u($[W],$.length-1===W);if(Y===Z[0])return Z[0];if(m.includes(Z[1]))return f.push(Z[0]),Z[1];return Y}),V=H(E);if(this._storage.has(V)){q=this._storage.get(V),q?.args.forEach((Y,W)=>{Q[Y]=f[W]});break}}}return[q,Q]}keys(){return this._storage.keys()}}class k{constructor(...n){n.forEach(($)=>{if(!this[$])this[$]=new y})}get(n){return this[n]}}class t{path="";parsed=[];args=[];constructor(n){s(this,{path:n,...T(n)})}}var U=(n,$=2)=>String(n).padStart($,"0"),d=new Map;function I(n,$){let Q=JSON.stringify({locale:$,...n}),q=d.get(Q);if(!q)q=new Intl.DateTimeFormat($,n),d.set(Q,q);return q}var M={YYYY:(n)=>String(n.getFullYear()),YY:(n)=>U(n.getFullYear()%100),MMMM:(n,$)=>I({month:"long"},$).format(n),MMM:(n,$)=>I({month:"short"},$).format(n),MM:(n)=>U(n.getMonth()+1),M:(n)=>String(n.getMonth()+1),dddd:(n,$)=>I({weekday:"long"},$).format(n),ddd:(n,$)=>I({weekday:"short"},$).format(n),DD:(n)=>U(n.getDate()),D:(n)=>String(n.getDate()),HH:(n)=>U(n.getHours()),H:(n)=>String(n.getHours()),hh:(n)=>{let $=n.getHours()%12||12;return U($)},h:(n)=>String(n.getHours()%12||12),A:(n,$)=>{return(I({hour:"numeric",hour12:!0},$).formatToParts(n).find((X)=>X.type==="dayPeriod")?.value??(n.getHours()<12?"AM":"PM")).toUpperCase()},a:(n,$)=>{return(I({hour:"numeric",hour12:!0},$).formatToParts(n).find((X)=>X.type==="dayPeriod")?.value??(n.getHours()<12?"AM":"PM")).toLowerCase()},mm:(n)=>U(n.getMinutes()),m:(n)=>String(n.getMinutes()),ss:(n)=>U(n.getSeconds()),s:(n)=>String(n.getSeconds()),SSS:(n)=>U(n.getMilliseconds(),3),Q:(n)=>String(Math.floor(n.getMonth()/3)+1),DoY:(n)=>{let $=new Date(n.getFullYear(),0,1),Q=Math.floor((+n-+$)/86400000)+1;return String(Q)}};function U$(n,$){M[n]=$,globalThis.__dateTokenRegex=null}function Jn(){if(globalThis.__dateTokenRegex)return globalThis.__dateTokenRegex;let n=new RegExp(Object.keys(M).sort(($,Q)=>Q.length-$.length).map(($)=>$.replace(/([.*+?^${}()|[\]\\])/g,"\\$1")).join("|"),"g");return globalThis.__dateTokenRegex=n,n}function a(n,$="YYYY-MM-DD HH:mm:ss",Q){let q=typeof n==="number"?new Date(n):typeof n==="string"?new Date(n):n,X=Jn(),f=new Map;return $.replace(X,(B)=>{if(f.has(B))return f.get(B);let E=M[B],V=E?E(q,Q):B;return f.set(B,V),V})}Date.prototype.format=function(n,$){return a(this,n,$)};Date.registerFormat=function(n,$){M[n]=$,globalThis.__dateTokenRegex=null};Date.format=function(n,$){return new Date().format(n,$)};class S{date;constructor(n){this.date=n?new Date(n):new Date}timed(n,$=1){let Q=[["year","FullYear"],["month","Month"],["day","Date"],["hour","Hours"],["minute","Minutes"],["second","Seconds"],["millisecond","Milliseconds"]],q=this.date;if(n.quarter)q.setMonth(q.getMonth()+3*n.quarter);if(n.week)q.setDate(q.getDate()+7*n.week);for(let[X,f]of Q){let B=n[X];if(B!==void 0&&B!==0)q[`set${f}`](q[`get${f}`]()+B)}if(n.startOfMonth)q.setDate(1),q.setHours(0,0,0,0);if(n.endOfMonth)q.setMonth(q.getMonth()+1,0),q.setHours(23,59,59,999);if(n.week!==void 0&&$!==void 0){let f=(q.getDay()-$+7)%7;q.setDate(q.getDate()-f)}return q}static timed(n,$=1){return new S().timed(n,$)}static local(n){return new Date(n).toLocaleString()}local(){return this.date.toLocaleDateString()}format(n="YYYY-MM-DD HH:mm:ss",$){return a(this.date,n,$)}static format(n="YYYY-MM-DD HH:mm:ss",$){let Q=new Date,q=typeof Q==="number"?new Date(Q):typeof Q==="string"?new Date(Q):Q,X=(x,nn=2)=>String(x).padStart(nn,"0"),f=q.getHours(),B=f%12||12,E=new Intl.DateTimeFormat($,{month:"long"}).format(q),V=new Intl.DateTimeFormat($,{month:"short"}).format(q),O=new Intl.DateTimeFormat($,{weekday:"long"}).format(q),Y=new Intl.DateTimeFormat($,{weekday:"short"}).format(q),Z=new Intl.DateTimeFormat($,{hour:"numeric",hour12:!0}).formatToParts(q).find((x)=>x.type==="dayPeriod")?.value||(f<12?"AM":"PM"),e={YYYY:String(q.getFullYear()),YY:X(q.getFullYear()%100),MMMM:E,MMM:V,MM:X(q.getMonth()+1),M:String(q.getMonth()+1),dddd:O,ddd:Y,DD:X(q.getDate()),D:String(q.getDate()),HH:X(f),H:String(f),hh:X(B),h:String(B),A:Z.toUpperCase(),a:Z.toLowerCase(),mm:X(q.getMinutes()),m:String(q.getMinutes()),ss:X(q.getSeconds()),s:String(q.getSeconds()),SSS:X(q.getMilliseconds(),3),Q:String(Math.floor(q.getMonth()/3)+1)};return n.replace(/YYYY|YY|MMMM|MMM|MM|M|dddd|ddd|DD|D|HH|H|hh|h|A|a|mm|m|ss|s|SSS|Q/g,(x)=>e[x])}static get now(){return Date.now()}random(n=new Date){let $=this.date.getTime(),Q=n.getTime(),q=$+Math.random()*(Q-$);return new Date(q)}static random(n,$=new Date){let Q=n.getTime(),q=$.getTime(),X=Q+Math.random()*(q-Q);return new Date(X)}delta(n){let $=this.date;if(n.year)$.setFullYear($.getFullYear()+n.year);if(n.month)$.setMonth($.getMonth()+n.month);if(n.day)$.setDate($.getDate()+n.day);if(n.hour)$.setHours($.getHours()+n.hour);if(n.minute)$.setMinutes($.getMinutes()+n.minute);if(n.second)$.setSeconds($.getSeconds()+n.second);return $}static delta(n){return new S().delta(n)}}export{s$ as stripOnce,k$ as strip,nq as strDecode,v as sparse,hn as setCookie,cn as scrptLoader,U$ as registerToken,s as readOnly,vn as reClass,i as reCamel,e$ as randomAZ,a$ as rand,u as pathType,T as parsePath,Zq as objectUdpated,h as oVals,Bq as oLen,qq as oKeys,G as oItems,fq as oHas,P as oFreeze,Qq as oFItems,Xq as oDefine,L as oAss,m$ as numSequence,H as ngify,pn as metaLoader,Fn as memoize,Gn as matchPath,j as makeID,Zn as log,Vq as keyInMapArray,Eq as keyInMap,c$ as isWindow,r$ as isUndefined,N as isStr,g$ as isPromise,y$ as isPlainObject,u$ as isObject,w$ as isObj,K as isNumber,o$ as isNum,j$ as isNull,z as isNotWindow,h$ as isNotNull,S$ as isModule,l as isInt,A as isFN,p$ as isDefined,v$ as isClassTypeOf,P$ as isClassOrId,l$ as isClass,o as isBool,_$ as isAsync,A$ as isArraybuff,J as isArr,p as idm,Bn as htmlHead,Qn as head,jn as getHead,_ as getAttr,a as formatDate,Hn as deprecated,rn as cssLoader,Oq as compareObjects,d$ as camel,t$ as buffed,Nn as bind,zn as asNumber,Rn as asBool,bn as asArray,Ln as arrFrom,Yq as areSetsEqual,ln as addCSS,$q as addBASE,r as _htmlHead,S as Time,k as SymStorage,y as Storage,xn as Singleton,t as MinStorage,R as Mapper,sn as IfClient,F as Cacher,Kn as Cached,En as CSSJSHead};
