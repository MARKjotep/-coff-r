// @bun
import{a as m,b as g,ka as c,qa as o}from"./index-ecefttf0.js";var{file:p}=globalThis.Bun;var a=async(t)=>{return await Bun.file(t).exists()},e=async(t,s="")=>{if(await a(t))return!0;return await Bun.write(t,s),!0},n=async(t)=>{let{mkdir:s}=await import("fs/promises");if(await a(t))return!0;return await s(t,{recursive:!0}),!0};import{config as u}from"dotenv";class l{path;constructor(t){this.path=t}async init(){await n(this.path);let t=this.path+"/.env";return await e(t,`SECRET_KEY="${c(20)}"
TLS_KEY=""
TLS_CERT=""`),u({path:t}),this}secret(){let t=process.env.SECRET_KEY;if(!t)throw Error("'SECRET_KEY' not found in .env file");return t}tls(){return o(process.env).filter(([t])=>typeof t==="string"&&t.startsWith("TLS_")).reduce((t,[s,i])=>{if(!i||typeof s!=="string")return t;let r=s.replace("TLS_","").toLowerCase();return t[r]=p(i),t},{})}}var{file:f,write:h}=globalThis.Bun;class w{fs;f_timed;data;key;dir;constructor({dir:t,fs:s,key:i}){this.dir=t+"/ffs",this.key=i,this.f_timed=Date.now(),this.data=new Map,this.fs=this.dir+`/${s}.json`}async init(){if(await n(this.dir)&&await e(this.fs,"{}"))f(this.fs).text().then((t)=>{let s=JSON.parse(t);this.data=new Map(o(s))}).catch((t)=>{})}async get(t){let s=this.data.get(t);if(s)return s;return null}async queue(){}async set(t){if(this.key in t){let s=await f(this.fs).text();if(s){let i=JSON.parse(s),r=t[this.key];i[r]=t,await h(this.fs,JSON.stringify(i))}this.data.set(t[this.key],t)}return!1}async delete(t){if(await this.get(t)){let s=await f(this.fs).text();if(s){let i=JSON.parse(s.toString());if(t in i)delete i[t],await h(this.fs,JSON.stringify(i));this.data.delete(t)}}}async json(){let t=await f(this.fs).text();return JSON.parse(t)}}var F=(t,...s)=>{let i=new Bun.CryptoHasher("sha256",t);return s.forEach((r)=>{i.update(r)}),i.digest()};export{a as isPath,e as isFile,n as isDir,w as JSONCacher,l as Envy,F as Digest};
